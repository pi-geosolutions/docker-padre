<?xml version="1.0" encoding="UTF-8"?>
<geonet>
    <services package="fr.pigeosolutions.geoportal">
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!-- Layertree services                                           -->
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
		<service name="pigeo.layertree.get">
			<class name="fr.pigeosolutions.geoportal.services.layertree.Get">
				<param name="withGroups" value="false"/>
			</class>
			<output sheet="pigeo/geoportal/layertree-2json.xsl" contentType="text/plain; charset=UTF-8"/>
		</service>
		<service name="pigeo.layertree.admin.get">
			<class name="fr.pigeosolutions.geoportal.services.layertree.Get">
				<param name="withGroups" value="true"/>
			</class>
			<output sheet="pigeo/geoportal/layertree-2json.xsl" contentType="text/plain; charset=UTF-8"/>
		</service>
		<service name="pigeo.layertree.admin.set">
			<class name="fr.pigeosolutions.geoportal.services.layertree.Set">
				<param name="force" value="false"/>
			</class>
		</service>
		<service name="pigeo.layertree.admin.set_force">
			<class name="fr.pigeosolutions.geoportal.services.layertree.Set">
				<param name="force" value="true"/>
			</class>
		</service>
		<service name="pigeo.layertree.admin">
			<output sheet="pigeo/geoportal/layertree-admin.xsl"/>
		</service>
		
		<service name="pigeo.layertree.admin.backups.list">
			<class name="fr.pigeosolutions.geoportal.services.layertree.Backups">
				<param name="mode" value="list"/>
			</class>
		</service>
		<service name="pigeo.layertree.admin.backups.get">
			<class name="fr.pigeosolutions.geoportal.services.layertree.Backups">
				<param name="mode" value="get"/>
			</class>
			<output sheet="pigeo/geoportal/layertree-2json.xsl" contentType="text/plain; charset=UTF-8"/>
		</service>
		<service name="pigeo.layertree.admin.backups.remove">
			<class name="fr.pigeosolutions.geoportal.services.layertree.Backups">
				<param name="mode" value="remove"/>
			</class>
		</service>
		
		<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!-- FeatureInfoManager services                                           -->
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
		<service name="pigeo.featureinfos.set">
			<class name="fr.pigeosolutions.geoportal.services.featureinfos.Set" />
		</service>
		<service name="pigeo.featureinfos.get">
			<class name="fr.pigeosolutions.geoportal.services.featureinfos.Get" />
			<output sheet="pigeo/geoportal/fiLabels-2json.xsl" contentType="text/plain; charset=UTF-8"/>
		</service>
		
		
		<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!-- Chart services                                           -->
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
		<service name="pigeo.layers.getchartdata">
			<class name="fr.pigeosolutions.geoportal.services.layers.GetChartData">
			</class>
		</service>
		<service name="pigeo.layers.listchartingdbs">
			<output sheet="pigeo/geoportal/listChartingDBs.xsl" contentType="text/xml; charset=UTF-8">
				<xml name="charts" file="WEB-INF/config-pigeo-charts.xml" localized="false" />
			</output>
		</service>
		
		<service name="pigeo.layers.getchartdata.json">
			<class name="fr.pigeosolutions.geoportal.services.layers.GetChartData">
			</class>
			<output sheet="pigeo/geoportal/tojson.xsl" contentType="application/json; charset=UTF-8"/>
		</service>
		
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!-- Dashboard services                                           -->
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

		<!-- - - - - Ndvi extractor service - - - 
						- basePath param can be either relative or absolute path. If relative, it is relative to geonetwork data dir
						  It must point to the root directory, containing the NDVI, SM, etc folders (those are listed in the infotree.js config file)
		-->
		
		<!-- - - -  unused for now. Object : collect info about which datasets are 
					available and their boundaries (time interval, etc)- - - -->
		<service name="pigeo.ndvi.initialize">
			<class name="fr.pigeosolutions.geoportal.services.ndvi.Initialize">
<!-- 				<param name="basePath" value="geoportal/NDVIlikes/"/> -->
				<param name="basePath" value="/home/large/geoserver-prod-datadir/data/afo/rast/5_ndvi/"/>
				<param name="ext" value="tif"/>
			</class>
		</service>
		<service name="pigeo.ndvi.listfiles">
			<class name="fr.pigeosolutions.geoportal.services.ndvi.ListFiles">
<!-- 				<param name="basePath" value="geoportal/NDVIlikes/"/> -->
				<param name="basePath" value="/home/large/geoserver-prod-datadir/data/afo/rast/5_ndvi/"/>
				<param name="ext" value="tif"/>
			</class>
		</service>
		<service name="pigeo.ndvi.getvalues">
			<class name="fr.pigeosolutions.geoportal.services.ndvi.GetValues">
<!-- 				<param name="basePath" value="geoportal/NDVIlikes/"/> -->
				<param name="basePath" value="/home/large/geoserver-prod-datadir/data/afo/rast/5_ndvi/"/>
				<param name="ext" value="tif"/>
			</class>
		</service>
		<service name="pigeo.ndvi.getvalues_tsv">
			<class name="fr.pigeosolutions.geoportal.services.ndvi.GetValues">
<!-- 				<param name="basePath" value="geoportal/NDVIlikes/"/> -->
				<param name="basePath" value="/home/large/geoserver-prod-datadir/data/afo/rast/5_ndvi/"/>
				<param name="ext" value="tif"/>
			</class>
			<output sheet="pigeo/geoportal/XMLdata2tsv.xsl" contentType="text/plain; charset=UTF-8"/>
		</service>

		<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!-- Animation services                                           -->
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
		<service name="pigeo.animations.listfiles">
			<class name="fr.pigeosolutions.geoportal.services.animations.ListFiles">
				<param name="basePath" value="/home/jean/tomcat7/data/geoportal-global/animations/"/>
				<param name="ext" value="png"/>
			</class>
		</service>
		<service name="pigeo.animations.listfiles.json">
			<class name="fr.pigeosolutions.geoportal.services.animations.ListFiles">
				<param name="basePath" value="/home/jean/tomcat7/data/geoportal-global/animations/"/>
				<param name="ext" value="png"/>
			</class>
			<output sheet="pigeo/geoportal/tojson.xsl" contentType="application/json; charset=UTF-8"/>
		</service>
		<service name="pigeo.animations.getimage">
			<class name="fr.pigeosolutions.geoportal.services.animations.GetImage" />
			<error id="file-not-found" sheet="error-embedded.xsl" statusCode="404">
				<xml name="error" file="xml/file-not-found-error.xml" />
			</error>

			<output file="true" />
		</service>
		
		
		<service name="pigeo.animations.list">
			<output sheet="pigeo/geoportal/listAnimations.xsl" contentType="text/xml; charset=UTF-8">
				<xml name="animations" file="WEB-INF/config-pigeo-animations.xml" localized="false" />
			</output>
		</service>
		
    </services>
</geonet>
